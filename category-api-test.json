{
  "category_api_tests": {
    "description": "Test API endpoints for Category CRUD operations",
    "base_url": "http://localhost:8080/api/v1",

    "1_get_all_categories": {
      "method": "GET",
      "endpoint": "/categories",
      "description": "Get all categories",
      "expected_response": {
        "statusCode": 200,
        "message": "Categories retrieved successfully",
        "data": [
          {
            "id": 1,
            "name": "Fiction",
            "parentId": null,
            "parentName": null
          },
          {
            "id": 2,
            "name": "Science Fiction",
            "parentId": 1,
            "parentName": "Fiction"
          }
        ]
      }
    },

    "2_get_root_categories": {
      "method": "GET",
      "endpoint": "/categories/root",
      "description": "Get categories without parent",
      "expected_response": {
        "statusCode": 200,
        "message": "Root categories retrieved successfully",
        "data": [
          {
            "id": 1,
            "name": "Fiction",
            "parentId": null,
            "parentName": null
          },
          {
            "id": 3,
            "name": "Non-Fiction",
            "parentId": null,
            "parentName": null
          }
        ]
      }
    },

    "3_get_child_categories": {
      "method": "GET",
      "endpoint": "/categories/children/{parentId}",
      "description": "Get categories by parent ID",
      "example_endpoint": "/categories/children/1",
      "expected_response": {
        "statusCode": 200,
        "message": "Child categories retrieved successfully",
        "data": [
          {
            "id": 2,
            "name": "Science Fiction",
            "parentId": 1,
            "parentName": "Fiction"
          },
          {
            "id": 4,
            "name": "Fantasy",
            "parentId": 1,
            "parentName": "Fiction"
          }
        ]
      }
    },

    "4_get_category_by_id": {
      "method": "GET",
      "endpoint": "/categories/{id}",
      "description": "Get a single category by its ID",
      "example_endpoint": "/categories/1",
      "expected_response": {
        "statusCode": 200,
        "message": "Category retrieved successfully",
        "data": {
          "id": 1,
          "name": "Fiction",
          "parentId": null,
          "parentName": null
        }
      }
    },

    "5_create_category": {
      "method": "POST",
      "endpoint": "/categories",
      "description": "Create a new category (Admin only)",
      "auth_required": true,
      "headers": {
        "Authorization": "Bearer YOUR_ADMIN_TOKEN",
        "Content-Type": "application/json"
      },
      "body": {
        "name": "Romance",
        "parentId": null
      },
      "expected_response": {
        "statusCode": 201,
        "message": "Category created successfully",
        "data": {
          "id": 5,
          "name": "Romance",
          "parentId": null,
          "parentName": null
        }
      }
    },

    "6_create_subcategory": {
      "method": "POST",
      "endpoint": "/categories",
      "description": "Create a subcategory with parent",
      "auth_required": true,
      "headers": {
        "Authorization": "Bearer YOUR_ADMIN_TOKEN",
        "Content-Type": "application/json"
      },
      "body": {
        "name": "Historical Romance",
        "parentId": 5
      },
      "expected_response": {
        "statusCode": 201,
        "message": "Category created successfully",
        "data": {
          "id": 6,
          "name": "Historical Romance",
          "parentId": 5,
          "parentName": "Romance"
        }
      }
    },

    "7_update_category": {
      "method": "PUT",
      "endpoint": "/categories/{id}",
      "description": "Update an existing category (Admin only)",
      "example_endpoint": "/categories/1",
      "auth_required": true,
      "headers": {
        "Authorization": "Bearer YOUR_ADMIN_TOKEN",
        "Content-Type": "application/json"
      },
      "body": {
        "name": "Fiction Books"
      },
      "expected_response": {
        "statusCode": 200,
        "message": "Category updated successfully",
        "data": {
          "id": 1,
          "name": "Fiction Books",
          "parentId": null,
          "parentName": null
        }
      }
    },

    "8_delete_category": {
      "method": "DELETE",
      "endpoint": "/categories/{id}",
      "description": "Delete a category (Admin only)",
      "example_endpoint": "/categories/1",
      "auth_required": true,
      "headers": {
        "Authorization": "Bearer YOUR_ADMIN_TOKEN"
      },
      "expected_response": {
        "statusCode": 200,
        "message": "Category deleted successfully"
      }
    },

    "test_scenarios": {
      "scenario_1_create_category_tree": {
        "description": "Create a parent category and subcategories",
        "steps": [
          {
            "step": 1,
            "action": "Create root category",
            "method": "POST",
            "endpoint": "/categories",
            "body": {
              "name": "Technology",
              "parentId": null
            }
          },
          {
            "step": 2,
            "action": "Create first subcategory",
            "method": "POST",
            "endpoint": "/categories",
            "body": {
              "name": "Programming",
              "parentId": 1
            }
          },
          {
            "step": 3,
            "action": "Create second subcategory",
            "method": "POST",
            "endpoint": "/categories",
            "body": {
              "name": "Web Development",
              "parentId": 2
            }
          },
          {
            "step": 4,
            "action": "Get children of Technology",
            "method": "GET",
            "endpoint": "/categories/children/1"
          }
        ]
      },

      "scenario_2_full_lifecycle": [
        {
          "step": 1,
          "action": "Create category",
          "method": "POST",
          "endpoint": "/categories",
          "body": {
            "name": "Test Category",
            "parentId": null
          }
        },
        {
          "step": 2,
          "action": "Get category",
          "method": "GET",
          "endpoint": "/categories/{id}"
        },
        {
          "step": 3,
          "action": "Update category",
          "method": "PUT",
          "endpoint": "/categories/{id}",
          "body": {
            "name": "Updated Category"
          }
        },
        {
          "step": 4,
          "action": "Delete category",
          "method": "DELETE",
          "endpoint": "/categories/{id}"
        }
      ]
    },

    "error_cases": {
      "category_not_found": {
        "method": "GET",
        "endpoint": "/categories/99999",
        "expected_error": {
          "statusCode": 404,
          "message": "Category not found"
        }
      },

      "parent_not_found": {
        "method": "POST",
        "endpoint": "/categories",
        "body": {
          "name": "Test",
          "parentId": 99999
        },
        "expected_error": {
          "statusCode": 404,
          "message": "Parent category not found"
        }
      },

      "self_parent": {
        "method": "PUT",
        "endpoint": "/categories/1",
        "body": {
          "parentId": 1
        },
        "expected_error": {
          "statusCode": 400,
          "message": "Category cannot be its own parent"
        }
      },

      "delete_with_children": {
        "description": "Cannot delete category that has child categories",
        "method": "DELETE",
        "endpoint": "/categories/1",
        "expected_error": {
          "statusCode": 400,
          "message": "Cannot delete category with child categories. Delete children first."
        }
      },

      "missing_name": {
        "method": "POST",
        "endpoint": "/categories",
        "body": {
          "parentId": null
        },
        "expected_error": {
          "statusCode": 400,
          "message": "Validation failed"
        }
      },

      "unauthorized": {
        "method": "POST",
        "endpoint": "/categories",
        "headers": {},
        "expected_error": {
          "statusCode": 401,
          "message": "Unauthorized"
        }
      }
    }
  }
}

